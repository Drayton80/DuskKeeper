generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
  engineType      = "binary"
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  extensions = [uuid_ossp(map: "uuid-ossp", schema: "public")]
}

model ActionCategories {
  id          String    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name        String    @unique @db.VarChar(255)
  link        String?   @db.VarChar(255)
  summary     String?
  description String
  createdAt   DateTime? @default(now()) @db.Timestamptz(6)
  updatedAt   DateTime? @default(now()) @db.Timestamptz(6)
  actions     Actions[]

  @@index([name], map: "idx_action_categories_name")
  @@map("actionCategories")
}

model ActionTraits {
  actionId  String    @db.Uuid
  traitId   String    @db.Uuid
  createdAt DateTime? @default(now()) @db.Timestamptz(6)
  actions   Actions   @relation(fields: [actionId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  traits    Traits    @relation(fields: [traitId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([actionId, traitId])
  @@map("actionTraits")
}

model ConditionEffects {
  id          String     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  conditionId String     @db.Uuid
  name        String     @db.VarChar(255)
  description String
  createdAt   DateTime?  @default(now()) @db.Timestamptz(6)
  updatedAt   DateTime?  @default(now()) @db.Timestamptz(6)
  conditions  Conditions @relation(fields: [conditionId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("conditionEffects")
}

model ConditionTraits {
  conditionId String     @db.Uuid
  traitId     String     @db.Uuid
  createdAt   DateTime?  @default(now()) @db.Timestamptz(6)
  conditions  Conditions @relation(fields: [conditionId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  traits      Traits     @relation(fields: [traitId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([conditionId, traitId])
  @@map("conditionTraits")
}

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model Actions {
  id               String           @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name             String           @unique @db.VarChar(255)
  categoryId       String           @db.Uuid
  link             String?          @db.VarChar(255)
  description      String
  summary          String?
  requirements     String[]
  createdAt        DateTime?        @default(now()) @db.Timestamptz(6)
  updatedAt        DateTime?        @default(now()) @db.Timestamptz(6)
  actionTraits     ActionTraits[]
  actionCategories ActionCategories @relation(fields: [categoryId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([name], map: "idx_actions_name")
  @@map("actions")
}

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model Conditions {
  id               String             @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name             String             @unique @db.VarChar(255)
  link             String?            @db.VarChar(255)
  description      String
  createdAt        DateTime?          @default(now()) @db.Timestamptz(6)
  updatedAt        DateTime?          @default(now()) @db.Timestamptz(6)
  conditionEffects ConditionEffects[]
  conditionTraits  ConditionTraits[]

  @@index([name], map: "idx_conditions_name")
  @@map("conditions")
}

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model Traits {
  id              String            @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name            String            @unique @db.VarChar(255)
  link            String?           @db.VarChar(255)
  leveling        Boolean?          @default(false)
  description     String
  createdAt       DateTime?         @default(now()) @db.Timestamptz(6)
  updatedAt       DateTime?         @default(now()) @db.Timestamptz(6)
  actionTraits    ActionTraits[]
  conditionTraits ConditionTraits[]

  @@index([name], map: "idx_traits_name")
  @@map("traits")
}
